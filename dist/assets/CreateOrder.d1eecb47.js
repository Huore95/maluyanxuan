import{_ as T,W as $,D as F,g as n,h as M,i as R,I as V,N as W,r as z,M as E,P as U,a6 as j,o as d,c as p,m as r,w as f,F as C,d as b,a as s,t as _,u as g,e as H,a0 as I,p as J,q as K}from"./index.c307a268.js";/* empty css               *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import{k as Q,h as X,m as Y,n as N}from"./index.e04da3cd.js";const Z=l=>(J("data-v-64277ddd"),l=l(),K(),l),ee={class:"address-wrap"},te={class:"name"},oe={class:"address"},ae={class:"buy-box"},se=["onClick"],re=Z(()=>s("section",null,null,-1)),ne={__name:"CreateOrder",setup(l){const k=$(),m=F(),v=n([]),h=n([]),y=n(0),c=n(!1),w=n([{name:"\u5FAE\u4FE1\u652F\u4ED8"},{name:"\u652F\u4ED8\u5B9D\u652F\u4ED8"}]);let a=M({name:"",tel:"",address:"",orderNo:""});R(()=>{O(),S()});async function S(){let e=localStorage.getItem("cartCheckedGoodsIds");v.value=e,Q(v.value).then(t=>{t.resultCode==200&&(h.value=t.data),y.value=h.value.reduce((u,i)=>u+i.sellingPrice*i.goodsCount,0)})}async function O(){let e=await X(k.query.addressId);a.name=e.data.userName,a.tel=e.data.userPhone,a.address=e.data.provinceName+e.data.cityName+e.data.regionName+e.data.detailAddress}function B(){c.value=!c.value,Y(k.query.addressId,v.value.split(",")).then(e=>{e.resultCode==200&&(a.orderNo=e.data)})}function P(e){e.name=="\u5FAE\u4FE1\u652F\u4ED8"?N(a.orderNo,1).then(t=>{t.resultCode==200&&(I("\u5FAE\u4FE1\u652F\u4ED8\u6210\u529F"),setTimeout(()=>{m.replace("/order")},500))}):e.name=="\u652F\u4ED8\u5B9D\u652F\u4ED8"&&N(a.orderNo,2).then(t=>{t.resultCode==200&&(I("\u652F\u4ED8\u5B9D\u652F\u4ED8\u6210\u529F"),setTimeout(()=>{m.replace("/order")},500))})}function x(){m.replace("/order")}return(e,t)=>{const u=V,i=W,G=z("router-link"),A=E,q=U,D=j;return d(),p(C,null,[r(i,{title:"\u751F\u6210\u8BA2\u5355","left-arrow":"",onClickLeft:t[0]||(t[0]=o=>e.$router.back())},{right:f(()=>[r(u,{name:"ellipsis",size:"18"})]),_:1}),r(G,{to:"/addressList"},{default:f(()=>[s("div",ee,[s("div",te,[s("span",null,_(g(a).name),1),s("span",null,_(g(a).tel),1)]),r(u,{name:"arrow"}),s("div",oe,[s("span",null,_(g(a).address),1)])])]),_:1}),(d(!0),p(C,null,b(h.value,o=>(d(),H(A,{key:o.goodsId,num:o.goodsCount,price:o.sellingPrice,title:o.goodsName,thumb:o.goodsCoverImg},null,8,["num","price","title","thumb"]))),128)),r(q,{price:y.value*100||0,label:"\u5546\u54C1\u91D1\u989D","button-text":"\u751F\u6210\u8BA2\u5355",onSubmit:B},null,8,["price"]),r(D,{show:c.value,"onUpdate:show":t[1]||(t[1]=o=>c.value=o),round:"",position:"bottom",style:{height:"22%"}},{default:f(()=>[s("div",ae,[(d(!0),p(C,null,b(w.value,(o,L)=>(d(),p("div",{onClick:de=>P(o),key:L},_(o.name),9,se))),128)),re,s("div",{onClick:x},"\u53D6\u6D88")])]),_:1},8,["show"])],64)}}},he=T(ne,[["__scopeId","data-v-64277ddd"]]);export{he as default};
